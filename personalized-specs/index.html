<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Personalized Specs — DeskXP</title>
  <meta name="description" content="Pick the services you need, add your details, and I’ll email you a tailored CX plan." />

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32.png">
  <link rel="icon" type="image/png" sizes="48x48" href="/assets/favicon-48.png">
  <link rel="icon" type="image/png" sizes="64x64" href="/assets/favicon-64.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
  <meta name="theme-color" content="#0d0f12">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,400..800;1,400..700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/site.css?v=210">

  <style>
    /* Match Privacy template shell */
    body {
      background: #1b272e;
      color: #e6e9ef;
      font-family: "Plus Jakarta Sans", sans-serif;
      line-height: 1.7;
      letter-spacing: -0.01em;
    }
    main {
      max-width: 860px;
      margin: 80px auto 120px;
      background: #14181d;
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 20px;
      padding: 56px 60px;
      box-shadow: 0 14px 40px rgba(0,0,0,0.35);
    }
    h1 { font-size: 2.4rem; color: #fff; font-weight: 700; margin-bottom: 10px; }
    h2 { color: #007236; font-size: 1.15rem; font-weight: 700; margin: 28px 0 8px; }
    p, li { font-size: 1rem; color: #c9d1d9; margin-bottom: 14px; }
    a { color: #00b858; text-decoration: none; font-weight: 500; }
    a:hover { text-decoration: underline; }
    strong { color: #ffffff; font-weight: 600; }
    .hint { color:#9aa3ad; font-size:.95rem; margin-top:-6px; }

    /* Form UI */
    .pillset { display:flex; flex-wrap:wrap; gap:10px; }
    .pill {
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 14px; border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      color:#e6e9ef; font-weight:700; cursor:pointer; user-select:none;
      transition: background .2s, border-color .2s, transform .1s;
    }
    .pill:hover { transform: translateY(-1px); }
    .pill[data-selected="true"] { background: rgba(0,114,54,.18); border-color: #007236; }
    .pill input { display:none; }

    .grid-2 { display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
    .full { grid-column: 1 / -1; }
    .form-field { display:flex; flex-direction:column; gap:6px; }
    .form-field label { font-weight:700; color:#e6e9ef; }
    .form-field input, .form-field textarea, .form-field select {
      background: rgba(0,0,0,.25); color: #e6e9ee;
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 10px; padding: 12px 14px;
    }

    .actions { display:flex; gap:10px; flex-wrap:wrap; margin-top:18px; }
    .btn { display:inline-flex; align-items:center; justify-content:center; gap:8px;
      padding:12px 18px; border-radius:12px; font-weight:800; border:0; cursor:pointer; }
    .btn-primary { background:#007236; color:#fff; }
    .btn-ghost { background:transparent; color:#e6e9ef; border:1px solid rgba(255,255,255,.18); }
    .step { display:none; } .step.active { display:block; }
    #formMsg { color:#c9d1d9; }

    /* Success state */
    #success { display:none; }
    #success.active { display:block; }
    .success-card {
      background:#0f1419;
      border:1px solid rgba(0, 255, 153, 0.18);
      border-radius:16px;
      padding:28px;
      box-shadow: 0 12px 32px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.06);
    }
    .check {
      width:56px;height:56px;border-radius:50%;
      background:#0a2d1a;border:1px solid rgba(0,255,153,.35);
      display:flex;align-items:center;justify-content:center;margin-bottom:12px;
    }
    .check svg { width:28px;height:28px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

    @media (max-width: 700px) {
      main { padding: 32px 24px; margin: 60px auto; }
      h1 { font-size: 2rem; }
      .grid-2 { grid-template-columns: 1fr; }
      .pillset { justify-content: center; }
    }
  </style>
</head>

<body>
  <div id="site-header"></div>

  <main>
    <h1 id="pageTitle">Personalized Specs</h1>
    <p class="hint">Pick what you need → add your details → I’ll email you a plan.</p>

    <!-- FORM -->
    <form id="specForm" autocomplete="on" novalidate>
      <!-- Honeypot -->
      <input type="text" id="website" name="website" style="display:none!important" tabindex="-1" autocomplete="off" />

      <!-- STEP 1 -->
      <section class="step active" id="step1" aria-labelledby="s1title">
        <h2 id="s1title">1) Select services you need</h2>
        <p class="hint">Multi-select.</p>
        <div class="pillset" id="servicesPills" role="group" aria-label="Services">
          <label class="pill" data-selected="false" for="svc_cx"><input type="checkbox" id="svc_cx" name="services" value="CX End to End management">CX End to End management</label>
          <label class="pill" data-selected="false" for="svc_onboard"><input type="checkbox" id="svc_onboard" name="services" value="Zendesk onboarding">Zendesk onboarding</label>
          <label class="pill" data-selected="false" for="svc_opt"><input type="checkbox" id="svc_opt" name="services" value="Zendesk optimization">Zendesk optimization</label>
          <label class="pill" data-selected="false" for="svc_omni"><input type="checkbox" id="svc_omni" name="services" value="Zendesk omnichannel integration">Zendesk omnichannel integration</label>
          <label class="pill" data-selected="false" for="svc_dash"><input type="checkbox" id="svc_dash" name="services" value="Dashboard">Dashboard</label>
          <label class="pill" data-selected="false" for="svc_integ"><input type="checkbox" id="svc_integ" name="services" value="Integration and automation">Integration and automation</label>
          <label class="pill" data-selected="false" for="svc_ai"><input type="checkbox" id="svc_ai" name="services" value="AI Agents">AI Agents</label>
          <label class="pill" data-selected="false" for="svc_qa"><input type="checkbox" id="svc_qa" name="services" value="QA and CSAT">QA and CSAT</label>
          <label class="pill" data-selected="false" for="svc_guide"><input type="checkbox" id="svc_guide" name="services" value="Zendesk Guide">Zendesk Guide</label>
        </div>

        <h2 id="s1size">2) Team size</h2>
        <p class="hint">Pick one.</p>
        <div class="pillset" id="sizePills" role="radiogroup" aria-labelledby="s1size">
          <label class="pill" data-selected="false" for="size_1_10"><input type="radio" id="size_1_10" name="team_size" value="1-10">1–10</label>
          <label class="pill" data-selected="false" for="size_11_30"><input type="radio" id="size_11_30" name="team_size" value="11-30">11–30</label>
          <label class="pill" data-selected="false" for="size_31_50"><input type="radio" id="size_31_50" name="team_size" value="31-50">31–50</label>
          <label class="pill" data-selected="false" for="size_50_100"><input type="radio" id="size_50_100" name="team_size" value="50-100">50–100</label>
          <label class="pill" data-selected="false" for="size_100p"><input type="radio" id="size_100p" name="team_size" value="100+">100+</label>
        </div>

        <div class="actions">
          <button type="button" class="btn btn-primary" id="btnNext">Next</button>
        </div>
      </section>

      <!-- STEP 2 -->
      <section class="step" id="step2" aria-labelledby="s2title">
        <h2 id="s2title">3) Your details</h2>
        <div class="grid-2">
          <div class="form-field">
            <label for="name">Full Name *</label>
            <input type="text" id="name" name="name" placeholder="Jane Doe" required>
          </div>
          <div class="form-field">
            <label for="email">Email Address *</label>
            <input type="email" id="email" name="email" placeholder="you@example.com" required>
          </div>
          <div class="form-field full">
            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" name="phone" placeholder="+63 9XX XXX XXXX">
          </div>
        </div>

        <div class="actions">
          <button type="button" class="btn btn-ghost" id="btnBack">Back</button>
          <button type="submit" class="btn btn-primary" id="submitBtn">Send Request</button>
        </div>
        <p id="formMsg" class="hint" role="status" aria-live="polite"></p>
      </section>
    </form>

    <!-- SUCCESS STATE -->
    <section id="success">
      <div class="success-card">
        <div class="check" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="#00b858"><path d="M9 16.2l-3.5-3.5-1.4 1.4L9 19 20 8l-1.4-1.4z"/></svg>
        </div>
        <h2 style="margin:0 0 6px;color:#e6f7ef;">Request received</h2>
        <p style="margin:0 0 10px;">Thanks <span id="confName" class="strong">there</span> — I’ll reply to <span id="confEmail" class="mono"></span> with your tailored plan.</p>
        <p class="hint" style="margin:0 0 14px;">If you don’t see an email in a few minutes, check Spam.</p>
        <div class="actions">
          <a href="/" class="btn btn-ghost">Back to Home</a>
          <a href="/services/" class="btn btn-primary">Explore Services</a>
        </div>
      </div>
    </section>

    <p class="hint" style="margin-top:18px">By submitting, you agree to be contacted about your project. No spam. No BS.</p>
  </main>

  <div id="footer"></div>
  <script>
    fetch("/footer.html").then(r => r.text()).then(html => (document.getElementById("footer").innerHTML = html));
  </script>

  <script>
    /* ================= CONFIG ================= */
    const ENDPOINT = "https://script.google.com/macros/s/AKfycbxrwhcGt8inCQBn60Z5xxkp-cdVhZEzCZ6A2kqQiYGLvKww2OGGYKAu0aO-_LbC-v7nNw/exec";
    const SECRET   = "deskxp_spec_2025";                  

    /* ============== UI + Logic ============== */
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const btnNext = document.getElementById('btnNext');
    const btnBack = document.getElementById('btnBack');
    const form = document.getElementById('specForm');
    const msg = document.getElementById('formMsg');
    const submitBtn = document.getElementById('submitBtn');

    const success = document.getElementById('success');
    const confName = document.getElementById('confName');
    const confEmail = document.getElementById('confEmail');
    const pageTitle = document.getElementById('pageTitle');

    // Pill toggle visuals
    document.querySelectorAll('.pill input').forEach(input => {
      const label = input.closest('.pill');
      const sync = () => {
        if (input.type === 'checkbox') label.dataset.selected = input.checked ? 'true' : 'false';
        if (input.type === 'radio') {
          document.querySelectorAll('input[name="'+input.name+'"]').forEach(r => {
            r.closest('.pill').dataset.selected = r.checked ? 'true' : 'false';
          });
        }
      };
      input.addEventListener('change', sync);
      sync();
      label.tabIndex = 0;
      label.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); input.click(); } });
    });

    // Stepper
    btnNext.addEventListener('click', () => {
      const hasService = !!document.querySelector('input[name="services"]:checked');
      const hasSize = !!document.querySelector('input[name="team_size"]:checked');
      if (!hasService) { alert('Pick at least one service.'); return; }
      if (!hasSize) { alert('Pick a team size.'); return; }
      step1.classList.remove('active'); step2.classList.add('active');
      document.getElementById('name').focus();
    });
    btnBack?.addEventListener('click', () => { step2.classList.remove('active'); step1.classList.add('active'); });

    // Submit
    form.addEventListener('submit', async (e) => {
      e.preventDefault(); msg.textContent = "";

      // Honeypot
      if ((document.getElementById('website').value||'').trim()!==''){
        showSuccess("(bot)", "(n/a)");
        return;
      }

      const services = [...document.querySelectorAll('input[name="services"]:checked')].map(i=>i.value);
      const team_size = document.querySelector('input[name="team_size"]:checked')?.value || '';
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();

      if (!name || !emailRegex.test(email)){ msg.textContent="❌ Enter a valid name and email."; return; }

      submitBtn.disabled = true; submitBtn.textContent="Sending…"; msg.textContent="Sending…";

      try {
        // No Content-Type header => avoids CORS preflight with Apps Script
        const res = await fetch(ENDPOINT, {
          method: "POST",
          body: JSON.stringify({
            secret: SECRET,
            services, team_size, name, email, phone,
            page: location.href, ua: navigator.userAgent
          })
        });

        const json = await res.json().catch(()=>({}));
        if (res.ok && json?.ok){
          showSuccess(name, email);
        } else {
          msg.textContent = `❌ ${json?.error || "Send failed. Try again."}`;
        }
      } catch(err){
        msg.textContent = "❌ Network error. Try again.";
      } finally {
        submitBtn.disabled = false; submitBtn.textContent="Send Request";
      }
    });

    function showSuccess(name, email){
      // Swap views
      form.style.display = 'none';
      success.classList.add('active');

      // Personalize
      confName.textContent = name || "there";
      confEmail.textContent = email || "";
      document.title = "Request received — DeskXP";
      pageTitle.textContent = "Personalized Specs";
      // Scroll to top of main so it’s visible
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  </script>

  <script src="/js/main.js?v=211" defer></script>
</body>
</html>
