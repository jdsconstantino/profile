<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Personalized Specs — DeskXP</title>
  <meta name="description" content="Pick the services you need, add your details, and I’ll email you a tailored CX plan." />
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32.png">
  <link rel="stylesheet" href="/site.css?v=2120" />
  <style>
    /* ===== Minimal inline styling so this looks right even if your site.css is stale ===== */
    :root{
      --dxp-green:#007236; --ink:#e7e9ee;
      --pill-bg:rgba(255,255,255,.06); --pill-bg-active:rgba(0,114,54,.18);
      --pill-border:rgba(255,255,255,.18); --pill-border-active:#007236;
    }
    body{color:var(--ink,#e7e9ee);}
    .glass.sticky{position:sticky;top:0;backdrop-filter:saturate(1.2) blur(8px);}
    #specsHero{padding:56px 0 16px;text-align:center}
    #specsHero .headline{font-size:2rem;margin-bottom:6px}
    #specsHero .subhead{opacity:.85}
    .section .container{max-width:1024px;margin:0 auto;padding:0 16px}
    .card{background:rgba(255,255,255,.03);border-radius:14px;padding:24px;backdrop-filter:blur(6px)}
    .muted{opacity:.85}.mt-2{margin-top:12px}.mt-4{margin-top:24px}
    .pillset{display:flex;flex-wrap:wrap;gap:10px}
    .pill{display:inline-flex;align-items:center;justify-content:center;padding:10px 14px;border-radius:999px;border:1px solid var(--pill-border);background:var(--pill-bg);color:var(--ink);font-weight:700;cursor:pointer;user-select:none;transition:background .2s,border-color .2s,transform .1s}
    .pill:hover{transform:translateY(-1px)}
    .pill[data-selected="true"]{background:var(--pill-bg-active);border-color:var(--pill-border-active)}
    .pill input{display:none}
    .form-field{display:flex;flex-direction:column;gap:6px}
    .form-field input,.form-field textarea,.form-field select{background:rgba(0,0,0,.25);color:#e7e9ee;border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:12px 14px}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 18px;border-radius:12px;font-weight:800;border:0;cursor:pointer}
    .btn-primary{background:var(--dxp-green);color:#fff}
    .btn-ghost{background:transparent;color:#e7e9ee;border:1px solid rgba(255,255,255,.18)}
    .actions{display:flex;gap:10px;flex-wrap:wrap}
    .step{display:none}.step.active{display:block}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .full{grid-column:1 / -1}
    @media(max-width:820px){.grid-2{grid-template-columns:1fr}.pillset{justify-content:center}}
  </style>
</head>
<body>
  <!-- Header -->
  <header class="site-header glass sticky">
    <a href="/" class="logo"><img src="/assets/logo.svg" alt="DeskXP" style="height:32px"></a>
    <nav class="nav-links">
      <a href="/services/">Services</a>
      <a href="/success-stories/">Success Stories</a>
      <a href="/about/">About</a>
    </nav>
  </header>

  <!-- Hero -->
  <section class="hero" id="specsHero">
    <div class="inner">
      <h1 class="headline">Personalized Specs</h1>
      <p class="subhead">Pick what you need → add your details → I’ll email you a plan.</p>
    </div>
  </section>

  <!-- Form -->
  <section class="section">
    <div class="container card">
      <form id="specForm" autocomplete="on" novalidate>
        <input type="text" id="website" name="website" style="display:none!important" tabindex="-1" autocomplete="off" />

        <!-- STEP 1 -->
        <div class="step active" id="step1" aria-labelledby="s1title">
          <h2 class="step-title" id="s1title" style="font-weight:800;margin-bottom:8px">1) Select services you need</h2>
          <p class="muted">Multi-select.</p>
          <div class="pillset" id="servicesPills" role="group" aria-label="Services">
            <label class="pill" data-selected="false" for="svc_cx"><input type="checkbox" id="svc_cx" name="services" value="CX End to End management">CX End to End management</label>
            <label class="pill" data-selected="false" for="svc_onboard"><input type="checkbox" id="svc_onboard" name="services" value="Zendesk onboarding">Zendesk onboarding</label>
            <label class="pill" data-selected="false" for="svc_opt"><input type="checkbox" id="svc_opt" name="services" value="Zendesk optimization">Zendesk optimization</label>
            <label class="pill" data-selected="false" for="svc_omni"><input type="checkbox" id="svc_omni" name="services" value="Zendesk omnichannel integration">Zendesk omnichannel integration</label>
            <label class="pill" data-selected="false" for="svc_dash"><input type="checkbox" id="svc_dash" name="services" value="Dashboard">Dashboard</label>
            <label class="pill" data-selected="false" for="svc_integ"><input type="checkbox" id="svc_integ" name="services" value="Integration and automation">Integration and automation</label>
            <label class="pill" data-selected="false" for="svc_ai"><input type="checkbox" id="svc_ai" name="services" value="AI Agents">AI Agents</label>
            <label class="pill" data-selected="false" for="svc_qa"><input type="checkbox" id="svc_qa" name="services" value="QA and CSAT">QA and CSAT</label>
            <label class="pill" data-selected="false" for="svc_guide"><input type="checkbox" id="svc_guide" name="services" value="Zendesk Guide">Zendesk Guide</label>
          </div>

          <h2 class="step-title mt-4" id="s1size" style="font-weight:800;margin-bottom:8px">2) Team size</h2>
          <p class="muted">Pick one.</p>
          <div class="pillset" id="sizePills" role="radiogroup" aria-labelledby="s1size">
            <label class="pill" data-selected="false" for="size_1_10"><input type="radio" id="size_1_10" name="team_size" value="1-10">1–10</label>
            <label class="pill" data-selected="false" for="size_11_30"><input type="radio" id="size_11_30" name="team_size" value="11-30">11–30</label>
            <label class="pill" data-selected="false" for="size_31_50"><input type="radio" id="size_31_50" name="team_size" value="31-50">31–50</label>
            <label class="pill" data-selected="false" for="size_50_100"><input type="radio" id="size_50_100" name="team_size" value="50-100">50–100</label>
            <label class="pill" data-selected="false" for="size_100p"><input type="radio" id="size_100p" name="team_size" value="100+">100+</label>
          </div>

          <div class="actions mt-4">
            <button type="button" class="btn btn-primary" id="btnNext">Next</button>
          </div>
        </div>

        <!-- STEP 2 -->
        <div class="step" id="step2" aria-labelledby="s2title">
          <h2 class="step-title" id="s2title" style="font-weight:800;margin-bottom:8px">3) Your details</h2>
          <div class="grid-2">
            <div class="form-field">
              <label for="name">Full Name *</label>
              <input type="text" id="name" name="name" placeholder="Jane Doe" required>
            </div>
            <div class="form-field">
              <label for="email">Email Address *</label>
              <input type="email" id="email" name="email" placeholder="you@example.com" required>
            </div>
            <div class="form-field full">
              <label for="phone">Phone Number</label>
              <input type="tel" id="phone" name="phone" placeholder="+63 9XX XXX XXXX">
            </div>
          </div>

          <div class="actions mt-4">
            <button type="button" class="btn btn-ghost" id="btnBack">Back</button>
            <button type="submit" class="btn btn-primary" id="submitBtn">Send Request</button>
          </div>
          <div id="formMsg" class="muted mt-2" role="status" aria-live="polite"></div>
        </div>
      </form>

      <p class="muted mt-4">By submitting, you agree to be contacted about your project. No spam. No BS.</p>
    </div>
  </section>

  <footer class="dxp-footer">
    <p>© 2025 DeskXP. All rights reserved.</p>
  </footer>

  <script>
    // ====== CONFIG — REPLACE THIS WITH YOUR WEB APP URL ======
    const ENDPOINT = "https://script.google.com/macros/s/AKfycbxrwhcGt8inCQBn60Z5xxkp-cdVhZEzCZ6A2kqQiYGLvKww2OGGYKAu0aO-_LbC-v7nNw/exec";
    const SECRET   = "deskxp_spec_2025"; // change both here and in Apps Script

    // ----- UI logic -----
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const btnNext = document.getElementById('btnNext');
    const btnBack = document.getElementById('btnBack');
    const form = document.getElementById('specForm');
    const msg = document.getElementById('formMsg');
    const submitBtn = document.getElementById('submitBtn');

    document.querySelectorAll('.pill input').forEach(input => {
      const label = input.closest('.pill');
      const sync = () => {
        if (input.type === 'checkbox') label.dataset.selected = input.checked ? 'true' : 'false';
        if (input.type === 'radio') {
          document.querySelectorAll('input[name="'+input.name+'"]').forEach(r => {
            r.closest('.pill').dataset.selected = r.checked ? 'true' : 'false';
          });
        }
      };
      input.addEventListener('change', sync);
      sync();
      label.tabIndex = 0;
      label.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); input.click(); } });
    });

    btnNext.addEventListener('click', () => {
      const selectedServices = [...document.querySelectorAll('input[name="services"]:checked')];
      const teamSize = document.querySelector('input[name="team_size"]:checked');
      if (!selectedServices.length) { alert('Pick at least one service.'); return; }
      if (!teamSize) { alert('Pick a team size.'); return; }
      step1.classList.remove('active'); step2.classList.add('active');
      document.getElementById('name').focus();
    });

    btnBack?.addEventListener('click', () => { step2.classList.remove('active'); step1.classList.add('active'); });

    form.addEventListener('submit', async (e) => {
      e.preventDefault(); msg.textContent = "";
      if ((document.getElementById('website').value||'').trim()!==''){ msg.textContent="✅ Thanks!"; form.reset(); return; }

      const services = [...document.querySelectorAll('input[name="services"]:checked')].map(i=>i.value);
      const team_size = document.querySelector('input[name="team_size"]:checked')?.value || '';
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();

      if (!name || !emailRegex.test(email)){ msg.textContent="❌ Enter a valid name and email."; return; }

      submitBtn.disabled = true; submitBtn.textContent="Sending…"; msg.textContent="Sending…";

      try {
        const res = await fetch(ENDPOINT, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ secret: SECRET, services, team_size, name, email, phone, page: location.href, ua: navigator.userAgent })
        });
        const json = await res.json().catch(()=>({}));
        if (res.ok && json?.ok){
          msg.textContent = "✅ Got it. I’ll reply via email.";
          form.reset();
          document.querySelectorAll('.pill').forEach(p=>p.dataset.selected='false');
          step2.classList.remove('active'); step1.classList.add('active');
        } else {
          msg.textContent = `❌ ${json?.error || "Send failed. Try again."}`;
        }
      } catch(err){
        msg.textContent = "❌ Network error. Try again.";
      } finally {
        submitBtn.disabled = false; submitBtn.textContent="Send Request";
      }
    });
  </script>
</body>
</html>
